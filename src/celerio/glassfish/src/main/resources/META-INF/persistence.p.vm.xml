$output.resource("META-INF", "persistence.xml")##
<persistence xmlns="http://xmlns.jcp.org/xml/ns/persistence"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/persistence http://xmlns.jcp.org/xml/ns/persistence/persistence_2_1.xsd"
             version="2.1">
	<persistence-unit name="${configuration.applicationName}PU" transaction-type="JTA">
		<description><![CDATA[
			persistence unit used during development is declared in the file WEB-INF/glassfish-resources.xml
		]]></description>
		
		<!-- begin hibernate -->
		<provider>org.hibernate.ejb.HibernatePersistence</provider>
		<!-- end hibernate -->
		
		<jta-data-source>app/jdbc/${configuration.applicationName}DS</jta-data-source>		

#foreach ($entity in $project.withoutManyToManyJoinEntities.list)
#if(!$entity.isVirtual())
		<class>${entity.model.fullType}</class>
#end
#end

		<properties>
			<!-- begin hibernate -->		
			<property name="hibernate.dialect" value="org.hibernate.dialect.H2Dialect"/>
			<property name="hibernate.transaction.jta.platform" value="org.hibernate.engine.transaction.jta.platform.internal.SunOneJtaPlatform"/>
			
#if($project.search.isNotEmpty())
			<property name="hibernate.search.model_mapping" value="${Search.packageName}.SearchMappingFactory" />
#end
#if($project.isAuditLogPresent())	
			<property name="hibernate.ejb.event.post-delete" value="${Audit.packageName}.AuditLogListener" />
			<property name="hibernate.ejb.event.post-insert" value="${Audit.packageName}.AuditLogListener"/>
			<property name="hibernate.ejb.event.pre-update" value="${Audit.packageName}.AuditLogListener"/>
#end
			<!-- end hibernate -->

			<!-- begin eclipse link -->		
			<property name="eclipselink.weaving" value="false" />
			<property name="eclipselink.deploy-on-startup" value="true" />
			<property name="eclipselink.logging.level" value="FINE" />
            <property name="eclipselink.target-database" value="org.eclipse.persistence.platform.database.H2Platform"/>
			<!-- end eclipse link -->		
		</properties>
	</persistence-unit>
</persistence>